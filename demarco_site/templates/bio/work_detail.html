{% extends "base.html" %}
{% load static %}

{% block title %}{{ work.title }} – Work Details{% endblock %}

{% block content %}
<div class="container page-section">

    <!-- Breadcrumb / Back -->
    <a href="{% url 'bio:works' %}"
       class="back-link"
       data-aos="fade-right">
        ← Back to Works
    </a>

    <!-- Title -->
    <header class="work-header" data-aos="fade-up">
        <h1>{{ work.title }}</h1>

        {% if work.subtitle %}
            <h2 class="subtitle">{{ work.subtitle }}</h2>
        {% endif %}

        <div class="meta">
            {% if work.year_published %}
                <span class="year"><strong>Published:</strong> {{ work.year_published }}</span>
            {% endif %}
            <span class="type">
                <strong>Type:</strong> {{ work.get_work_type_display }}
            </span>
        </div>
    </header>

    <!-- Description -->
    <section class="description-section" data-aos="fade-up" data-aos-delay="150">
        <h3>Summary</h3>
        <p>{{ work.description }}</p>
    </section>

    <!-- Key Ideas -->
    <section class="ideas-section" data-aos="fade-up" data-aos-delay="250">
        <h3>Key Ideas</h3>
        <p>{{ work.key_ideas|linebreaks }}</p>
    </section>

    <!-- Impact -->
    <section class="impact-section" data-aos="fade-up" data-aos-delay="350">
        <h3>Impact</h3>
        <p>{{ work.impact|linebreaks }}</p>
    </section>

    <!-- Related Influences -->
    {% if work.influence_set.all %}
        <section class="influence-section" data-aos="fade-up" data-aos-delay="450">
            <h3>Influenced</h3>

            <ul class="influence-list">
                {% for infl in work.influence_set.all %}
                    <li>
                        <strong>{{ infl.name }}</strong>
                        <span class="tag">{{ infl.get_influence_type_display }}</span>
                        <p>{{ infl.description|truncatechars:200 }}</p>
                    </li>
                {% endfor %}
            </ul>
        </section>
    {% endif %}

</div>

<!-- ----------------------------------------
     Styles
----------------------------------------- -->
<style>
    .back-link {
        display: inline-block;
        margin-bottom: 1rem;
        color: #2563eb;
        font-weight: 500;
        text-decoration: none;
    }
    .back-link:hover {
        text-decoration: underline;
    }

    .work-header h1 {
        margin-bottom: 0.25rem;
    }

    .subtitle {
        color: #555;
        margin-top: 0;
        margin-bottom: 1rem;
        font-size: 1.25rem;
    }

    .meta {
        display: flex;
        gap: 1.5rem;
        margin-bottom: 2rem;
        color: #444;
    }

    .meta span strong {
        color: #111;
    }

    section {
        margin-top: 2.5rem;
    }

    section h3 {
        margin-bottom: 0.75rem;
        color: #1f2937;
    }

    .influence-list {
        list-style: none;
        padding-left: 0;
        margin-top: 1rem;
    }

    .influence-list li {
        padding: 0.75rem 1rem;
        background: #f8fafc;
        border: 1px solid #e2e8f0;
        border-radius: 6px;
        margin-bottom: 1rem;
    }

    .tag {
        background: #2563eb;
        color: white;
        padding: 2px 6px;
        border-radius: 4px;
        font-size: 0.75rem;
        margin-left: 0.5rem;
    }
</style>

{% endblock %}
