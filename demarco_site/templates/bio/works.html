{% extends "base.html" %}
{% load static %}

{% block title %}Works by Tom DeMarco{% endblock %}

{% block content %}
<div class="container page-section">

    <!-- Page Header -->
    <h1 class="page-title" data-aos="fade-up">
        Works by Tom DeMarco
    </h1>
    <p class="page-subtitle" data-aos="fade-up" data-aos-delay="100">
        Books, articles, and foundational publications that shaped modern software engineering.
    </p>

    

    <!-- Works Grid -->
    <div class="work-grid">
        {% for work in works %}
            <a href="{% url 'bio:work_detail' work.slug %}"
               class="work-card"
               data-type="{{ work.work_type }}"
               data-aos="fade-up"
               data-aos-delay="{{ forloop.counter0|add:1 }}00">

                <div class="card-header">
                    <h3>{{ work.title }}</h3>

                    {% if work.subtitle %}
                        <p class="subtitle">{{ work.subtitle }}</p>
                    {% endif %}
                </div>

                <div class="meta">
                    {% if work.year_published %}
                        <span class="year">{{ work.year_published }}</span>
                    {% endif %}
                    <span class="type-tag">{{ work.get_work_type_display }}</span>
                </div>

                <p class="desc">
                    {{ work.description|truncatechars:200 }}
                </p>

                <span class="more-link">View Details â†’</span>
            </a>
        {% endfor %}
    </div>

</div>

<!-- ----------------------------------------
     Styles
----------------------------------------- -->
<style>
    .page-title {
        margin-bottom: 0.25rem;
    }
    .page-subtitle {
        margin-bottom: 2rem;
        color: #555;
    }

    /* Grid & Cards */
    .work-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(270px, 1fr));
        gap: 1.5rem;
    }
    .work-card {
        background: #fff;
        padding: 1.25rem 1.5rem;
        border-radius: 10px;
        border: 1px solid #e5e7eb;
        text-decoration: none;
        color: inherit;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        transition: transform 0.2s, box-shadow 0.2s;
        overflow: hidden;
    }
    .work-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    }

    /* Metadata */
    .meta {
        display: flex;
        gap: 0.5rem;
        margin: 0.5rem 0 1rem 0;
        align-items: center;
    }
    .year {
        font-weight: bold;
        color: #2563eb;
    }
    .type-tag {
        background: #2563eb;
        color: #fff;
        padding: 2px 8px;
        border-radius: 4px;
        font-size: 0.75rem;
    }

    .subtitle {
        color: #555;
        margin-top: -0.25rem;
    }

    .desc {
        color: #444;
        margin-bottom: 1rem;
    }

    .more-link {
        margin-top: auto;
        color: #2563eb;
        font-weight: 600;
    }
</style>

<!-- ----------------------------------------
     JS Filtering Logic
----------------------------------------- -->
<script>
document.addEventListener("DOMContentLoaded", () => {
    const buttons = document.querySelectorAll(".filter-btn");
    const cards = document.querySelectorAll(".work-card");

    buttons.forEach(btn => {
        btn.addEventListener("click", () => {

            // Activate button
            buttons.forEach(b => b.classList.remove("active"));
            btn.classList.add("active");

            // Filter cards
            const filter = btn.dataset.filter;

            cards.forEach(card => {
                const type = card.dataset.type;

                if (filter === "all" || filter === type) {
                    card.style.display = "block";
                } else {
                    card.style.display = "none";
                }
            });
        });
    });
});
</script>

{% endblock %}
